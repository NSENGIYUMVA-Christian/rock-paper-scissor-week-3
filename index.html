<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>rock paper scissor</title>
  </head>
  <body>
    <script>
      var randomChoice = "";

      // generate either rock, paper and scissor randomly
      function getComputerChoice() {
        randomChoice = Math.floor(Math.random() * 3);
        if (randomChoice === 0) {
          randomChoice = "rock";
        } else if (randomChoice === 1) {
          randomChoice = "paper";
        } else {
          randomChoice = "scissor";
        }
        return randomChoice;
      }
      //getComputerChoice();

      //round
      function singleRound(playerSelection, computerSelection) {
        var result = "";
        if (
          playerSelection === "rock".toLowerCase() &&
          computerSelection === "scissor".toLowerCase()
        ) {
          result = "You win! Rock beats scissor";
        } else if (
          playerSelection === "rock".toLowerCase() &&
          computerSelection === "paper".toLowerCase()
        ) {
          result = "You lose! paper beats rock";
        } else if (
          playerSelection === "rock".toLowerCase() &&
          computerSelection === "rock".toLowerCase()
        ) {
          result = "You tied! rock ties with rock";
        } else if (
          playerSelection === "paper".toLowerCase() &&
          computerSelection === "rock".toLowerCase()
        ) {
          result = "You win! paper beats rock";
        } else if (
          playerSelection === "paper".toLowerCase() &&
          computerSelection === "paper".toLowerCase()
        ) {
          result = "You tied! paper ties with paper";
        } else if (
          playerSelection === "paper".toLowerCase() &&
          computerSelection === "scissor".toLowerCase()
        ) {
          result = "You lose! scissor beats paper";
        } else if (
          playerSelection === "scissor".toLowerCase() &&
          computerSelection === "rock".toLowerCase()
        ) {
          result = "You lose! rock beats scissor";
        } else if (
          playerSelection === "scissor".toLowerCase() &&
          computerSelection === "paper".toLowerCase()
        ) {
          result = "You win! scissor beats paper";
        } else if (
          playerSelection === "scissor".toLowerCase() &&
          computerSelection === "scissor".toLowerCase()
        ) {
          result = "You tied! scissor ties with scissor";
        }

        return result;
      }

      // testing codes

      // console.log(
      //   `Player choice = ${playerChoice} and comp choice = ${compChoice}`
      // );

      //console.log(singleRound(playerChoice, compChoice));

      function game() {
        const playerChoices = [];
        const computerChoices = [];
        let playerCount = 0;
        let compCount = 0;
        let res = "";
        let winner = "";

        for (let i = 1; i < 6; i++) {
          const compChoice = getComputerChoice();
          const playerChoice = prompt(
            `Round ${i}: enter your choice(either paper,rock or scissor)`
          );

          // keeping track of each choices for player and comp
          playerChoices.push(playerChoice);
          computerChoices.push(compChoice);

          res = singleRound(playerChoice, compChoice);
          // incrementing for player if he wins
          if (res.startsWith("You win!")) {
            playerCount++;
          } else if (res.startsWith("You lose!")) {
            compCount++;
          } else {
            compCount = compCount + 0;
            playerCount = playerCount + 0;
          }
        }

        // deciding winner
        if (playerCount > compCount) {
          winner = "Congratulation, you are the winner";
        } else if (playerCount < compCount) {
          winner = "You lose. Computer won over you";
        }

        console.log("Player picks", playerChoices);
        console.log("Comp picks", computerChoices);
        console.log(
          `Player points = ${playerCount} and computer points = ${compCount}`
        );
        return winner;
      }

      console.log(game());
    </script>
  </body>
</html>
